(this["webpackJsonptravel-app"]=this["webpackJsonptravel-app"]||[]).push([[0],{41:function(e,t,a){e.exports=a.p+"static/media/heart.5e30bffd.svg"},42:function(e,t,a){e.exports=a.p+"static/media/heart-filled.2320281b.svg"},47:function(e,t,a){e.exports=a(82)},52:function(e,t,a){},53:function(e,t,a){},54:function(e,t,a){},55:function(e,t,a){},60:function(e,t,a){},78:function(e,t,a){},80:function(e,t,a){},81:function(e,t,a){},82:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(15),c=a.n(l),o=(a(52),a(2)),i=a(3),s=a(4),u=a(5),m=(a(53),a(6)),p=a(14),h=(a(54),a(55),a(7)),d=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.hotels;return r.a.createElement("div",{className:"sidebar"},r.a.createElement("div",{className:"sidebar-block sidebar-hotels"},r.a.createElement("h2",null,"More than just hotels"),r.a.createElement("div",{className:"s-list"},e.map((function(e,t){var a=e.title,n=e.image,l=e.price,c=e.location;return e.recommended?r.a.createElement("div",{className:"s-hotel",key:t},r.a.createElement("div",{className:"s-photo",style:{backgroundImage:"url(".concat(n,")")}}),r.a.createElement("div",{className:"s-info"},r.a.createElement("span",{className:"s-title"},a),r.a.createElement("span",{className:"s-location"},c),r.a.createElement("span",{className:"s-price"},l,"$")),r.a.createElement("div",{className:"s-button"},r.a.createElement("div",{className:"s-dot"}),r.a.createElement("div",{className:"s-dot"}))):[]})))))}}]),a}(r.a.Component),E=Object(h.b)((function(e){return{hotels:e.hotels}}))(d),f=(a(60),a(41)),v=a.n(f),b=a(42),y=a.n(b),g=a(10),O=a.n(g),j="https://nodejs-mysql-it-academy.herokuapp.com",N={headers:{"x-access-token":localStorage.getItem("token")}},S=function(e){return{type:"SAVE_TEXT",payload:e}},k=(a(78),function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).handleClick=function(){var t=e.props,a=t.hotel;(0,t.addToFavourites)(a)},e.isFav=function(t){return e.props.favourites.find((function(e){return e.id===t}))},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.hotel;return r.a.createElement("div",{className:"fav-button",onClick:this.handleClick},r.a.createElement("img",{className:"fav-icon",src:this.isFav(e.id)?y.a:v.a,alt:""}))}}]),a}(r.a.Component)),C=Object(h.b)((function(e){return{favourites:e.favourites}}),(function(e){return{addToFavourites:function(t){return e(function(e){return{type:"ADD_TO_FAVOURITES",payload:e}}(t))}}}))(k),w=function(e){var t=e.data;e.removable;return r.a.createElement("div",{className:"hotel",key:t.id},r.a.createElement("img",{src:t.image,alt:t.title,className:"hotel-img"}),r.a.createElement("div",{className:"hotel_info"},r.a.createElement(m.b,{to:"hotel/"+t.id},r.a.createElement("span",{className:"hotel-name"},t.title))),r.a.createElement("span",{className:"hotel-price"},t.price),r.a.createElement("p",null,t.location),r.a.createElement(C,{hotel:t}))},T=function(e){return r.a.createElement("div",null,r.a.createElement("div",{className:"currency"},r.a.createElement("select",{onChange:e.convertPrice,value:e.currency},r.a.createElement("option",{value:"CHF"},"CHF"),r.a.createElement("option",{value:"EUR"},"EUR"),r.a.createElement("option",{value:"GBP"},"GBP"),r.a.createElement("option",{value:"PLN"},"PLN"),r.a.createElement("option",{defaultValue:"USD"},"USD"))),r.a.createElement("div",{className:"main-container"},r.a.createElement(E,null),r.a.createElement("div",{className:"hotels"},r.a.createElement("div",{className:"tools",style:{width:"100%"}},r.a.createElement("input",{type:"button",value:e.sort?"A-Z":"Z-A",onClick:e.switchSort})),e.data.length>0?e.data.map((function(e,t){return r.a.createElement(w,{data:e,key:t})})):r.a.createElement("div",null))))},A=(a(80),function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(e=t.call.apply(t,[this].concat(l))).state={},e.inputRef=r.a.createRef(),e.handleSearch=function(t){e.props.filterHotels(t.target.value)},e.handleFilterPrice=function(t){e.props.filterHotelsPrice(t.target.value)},e.handleClick=function(){e.props.dispatch(S("New text is here"))},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.inputRef.current.focus()}},{key:"render",value:function(){return r.a.createElement("div",{className:"header"},r.a.createElement("span",null,r.a.createElement("button",{style:{borderRadius:"100%",minHeight:"40px",minWidth:"40px"}},r.a.createElement("i",{className:"glyphicon glyphicon-search"})),r.a.createElement("input",{type:"text",className:"search-field",placeholder:"Enter location",onChange:this.handleSearch,ref:this.inputRef}),r.a.createElement("hr",{style:{width:"60%"}})),r.a.createElement("div",{className:"filters-field"},r.a.createElement("span",null,r.a.createElement("span",null,r.a.createElement("i",{className:"glyphicon glyphicon-piggy-bank"})),r.a.createElement("input",{type:"text",placeholder:"Min. Price",onChange:this.handleFilterPrice,style:{border:"none",width:"100px",textAlign:"center",outline:"none"}}),r.a.createElement("span",null,r.a.createElement("i",{className:"glyphicon glyphicon-usd"})))),r.a.createElement("input",{type:"button",value:"click",onClick:this.handleClick},this.props.savedText))}}]),a}(r.a.Component)),_=Object(h.b)((function(e){return{savedText:e.text}}))(A),R=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={hotels:[],sort:!0,dataFromApi:[]},e.filterHotels=function(t){var a=e.state.hotels.filter((function(e){return e.location.toLowerCase().includes(t.toLowerCase())}));e.setState({hotels:t.length>0?a:e.props.hotels})},e.sortHotels=function(){var t,a;return e.state.sort?(t=1,a=-1):(t=-1,a=1),e.props.hotels.sort((function(e,n){return e.title>n.title?t:n.title>e.title?a:0}))},e.filterHotelsPrice=function(t){var a=e.props.hotels.filter((function(e){return e.price>=parseInt(t)}));e.setState({hotels:t.length>0?a:e.props.hotels})},e.switchSort=function(){e.setState({sort:!e.state.sort,hotels:e.sortHotels()})},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.props.hotels.length||this.props.getHotels()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(_,{filterHotels:this.filterHotels,filterHotelsPrice:this.filterHotelsPrice}),r.a.createElement(T,{data:this.props.hotels,switchSort:this.switchSort,sort:this.state.sort}))}}]),a}(r.a.Component),x=Object(h.b)((function(e){return{hotels:e.hotels}}),(function(e){return{getHotels:function(){return e((function(e){e({type:"GET_HOTELS"}),O.a.get("".concat(j,"/hotels")).then((function(t){e({type:"GET_HOTELS_SUCCESS",payload:t.data})})).catch((function(){e({type:"GET_HOTELS_ERROR"})}))}))}}}))(R),H=a(24),U=function(e){var t=Object(n.useState)({}),a=Object(H.a)(t,2),l=a[0],c=a[1];return Object(n.useEffect)((function(){!function(e,t){O.a.get("https://nodejs-mysql-it-academy.herokuapp.com/hotels/"+e).then((function(e){t(e.data)})).catch((function(e){console.log(e)}))}(e.match.params.id,c)}),[]),Object.keys(l).length>0&&r.a.createElement("div",{className:"hotel-view"},l.title)},L=a(23),P=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).login=function(t){t.preventDefault();var a,n=new FormData(t.target),r=Object(L.a)(n);try{for(r.s();!(a=r.n()).done;){var l=a.value;console.log(l)}}catch(c){r.e(c)}finally{r.f()}O.a.post("https://nodejs-mysql-it-academy.herokuapp.com/login",n,{headers:{"Content-type":"multipart/form-data"}}).then((function(t){localStorage.setItem("token",t.data.accessToken),e.props.history.push("/")})).catch((function(e){console.log(e)}))},e}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("h1",null,"Login"),r.a.createElement("form",{onSubmit:this.login},r.a.createElement("label",null,"Username:"),r.a.createElement("input",{type:"text",name:"username",required:!0}),r.a.createElement("label",null,"Password:"),r.a.createElement("input",{type:"password",name:"password",required:!0}),r.a.createElement("input",{type:"submit",value:"Login"})))}}]),a}(r.a.Component),F=Object(p.g)(P),q=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).register=function(e){e.preventDefault();var t,a=new FormData(e.target),n=Object(L.a)(a);try{for(n.s();!(t=n.n()).done;){var r=t.value;console.log(r)}}catch(l){n.e(l)}finally{n.f()}O.a.post("https://nodejs-mysql-it-academy.herokuapp.com/register",a,{headers:{"Content-type":"multipart/form-data"}}).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))},e}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("h1",null,"Register"),r.a.createElement("form",{onSubmit:this.register},r.a.createElement("label",null,"Username:"),r.a.createElement("input",{type:"text",name:"username",required:!0}),r.a.createElement("label",null,"Email:"),r.a.createElement("input",{type:"email",name:"email",required:!0}),r.a.createElement("label",null,"Password:"),r.a.createElement("input",{type:"password",name:"password",required:!0}),r.a.createElement("label",null,"Repeat Password:"),r.a.createElement("input",{type:"password",name:"repeatPassword",required:!0}),r.a.createElement("input",{type:"submit",value:"Register"})))}}]),a}(r.a.Component),D=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).addHotel=function(e){e.preventDefault();var t=new FormData(e.target),a={headers:{"Content-type":"multipart/form-data","x-access-token":localStorage.getItem("token")}};O.a.post(j+"/hotels",t,a).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))},e}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("h1",null,"Add new hotel"),r.a.createElement("form",{onSubmit:this.addHotel},r.a.createElement("label",null,"Title:"),r.a.createElement("input",{type:"text",name:"hotelTitle",className:"form-field",required:!0}),r.a.createElement("label",null,"Image:"),r.a.createElement("input",{type:"file",name:"hotelImage",className:"form-field",required:!0}),r.a.createElement("label",null,"Price:"),r.a.createElement("input",{type:"text",name:"hotelPrice",className:"form-field",required:!0}),r.a.createElement("label",null,"Type:"),r.a.createElement("select",{className:"form-field",name:"hotelType",required:!0},r.a.createElement("option",{selected:!0},"Normal"),r.a.createElement("option",null,"Plus"),r.a.createElement("option",null,"Premium")),r.a.createElement("label",null,"Location:"),r.a.createElement("input",{type:"text",className:"form-field",name:"hotelLocation",required:!0}),r.a.createElement("input",{type:"submit",value:"Add hotel",className:"submit"})))}}]),a}(r.a.Component),I=Object(p.g)(D),M=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("h1",null,"Contact Us"),r.a.createElement("form",{onSubmit:!0},r.a.createElement("label",null,"Name:"),r.a.createElement("input",{type:"text",name:"name",required:!0}),r.a.createElement("label",null,"Email:"),r.a.createElement("input",{type:"e-mail",name:"email",required:!0}),r.a.createElement("label",null,"Message:"),r.a.createElement("input",{type:"textarea",name:"message",required:!0}),r.a.createElement("input",{type:"submit",value:"Register"})))}}]),a}(r.a.Component),z=void 0,G=Object(p.g)((function(){var e=Object(h.d)((function(e){return e.userHotels})),t=Object(h.c)();return Object(n.useEffect)((function(){t((function(e){e({type:"GET_USER_HOTELS"}),O.a.get("".concat(j,"/my-hotels"),N).then((function(t){e({type:"GET_USER_HOTEL_SUCCESS",payload:t.data})})).catch((function(){e({type:"GET_USER_HOTEL_ERROR"})}))}))}),[]),r.a.createElement("div",{className:"hotels-container"},r.a.createElement("div",{className:"hotels"},e.length?z.state.hotels.map((function(e){return r.a.createElement(w,{data:e})})):r.a.createElement("div",null)))})),V=a(46),B=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).handleClick=function(){e.props.history.push("/login")},e.handleLogoutClick=function(){localStorage.removeItem("token"),e.props.verifyUserStatus()},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props,t=e.isAuthorized,a=e.user;return r.a.createElement("nav",{className:"navbar navbar-expand-md navbar-light bg-light"},r.a.createElement("div",{className:"navbar-collapse collapse w-100 order-1 order-md-0 dual-collapse2"},r.a.createElement("ul",{className:"navbar-nav mr-auto"},r.a.createElement("li",{className:"nav-item active"},r.a.createElement(m.b,{className:"navbar-brand",to:"/"},r.a.createElement("h2",null,r.a.createElement("b",null,"Travello")))))),r.a.createElement(m.b,{to:"/favourite",className:"favourite"},"Favourite"),r.a.createElement("div",{className:"navbar-collapse collapse w-100 order-3 dual-collapse2"},r.a.createElement("ul",{className:"navbar-nav ml-auto"},r.a.createElement("li",{className:"nav-item"},!t&&r.a.createElement("div",null,r.a.createElement(m.b,{className:"navbar-brand",to:"/register"},"Register"),r.a.createElement("input",{type:"button",value:"Sign In",onClick:this.handleClick})),t&&r.a.createElement("div",null,r.a.createElement(m.b,{className:"navbar-brand",to:"/add-hotel"},"Add hotels"),r.a.createElement(m.b,{className:"navbar-brand",to:"/my-hotels"},"My hotels"),r.a.createElement("input",{type:"button",value:"Logout",onClick:this.handleLogoutClick}),r.a.createElement("div",{className:"user-profile"},r.a.createElement("h2",null,"Hello ",a.username)))),r.a.createElement("li",{className:"navbar-brand",style:{marginTop:"-3px",marginLeft:"10px"}},r.a.createElement(m.b,{style:{color:"black"},to:"/contact-us"},r.a.createElement(V.a,null))))))}}]),a}(r.a.Component),X=Object(p.g)(B),J=a(44),Z=function(e){var t=e.component,a=e.isAuthorized,n=Object(J.a)(e,["component","isAuthorized"]);return console.log("PrivateRoute",a),r.a.createElement(p.b,Object.assign({},n,{render:function(e){return a?r.a.createElement(t,e):r.a.createElement(p.a,{to:"/login"})}}))},W=function(){var e=Object(n.useState)(""),t=Object(H.a)(e,2),a=t[0],l=t[1],c=Object(h.d)((function(e){return e.favourites})),o=Object(h.c)();return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Favourite list"),r.a.createElement("input",{type:"text",onChange:function(e){l(e.target.value)}}),c.filter((function(e){return e.title.toLowerCase().includes(a.toLocaleLowerCase())})).map((function(e){return r.a.createElement("p",{onClick:function(){var t;t=e.id,o({type:"REMOVE_FROM_FAVOURITES",payload:t})}},e.title)})))},$=(a(81),function(){return c.a.createPortal(r.a.createElement("div",{className:"notification"},"Test notification"),document.getElementById("portal-root"))}),K=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={user:null,isAuthorized:!1},e.verifyUserStatus=function(){var t=localStorage.getItem("token"),a={headers:{"x-access-token":t}};t&&t.length>0?O.a.get("".concat(j,"/users/me"),a).then((function(t){e.setState({user:t.data,isAuthorized:!0})})).catch((function(e){console.log(e)})):e.setState({user:null,isAuthorized:!1})},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.verifyUserStatus()}},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(m.a,{basename:"/travel-app"},r.a.createElement($,null),r.a.createElement(X,{isAuthorized:this.state.isAuthorized,user:this.state.user,verifyUserStatus:this.verifyUserStatus}),r.a.createElement(p.d,null,r.a.createElement(p.b,{path:"/hotel/:id",component:U}),r.a.createElement(p.b,{path:"/contact-us",component:M}),r.a.createElement(p.b,{path:"/login",component:F}),r.a.createElement(p.b,{path:"/register",component:q}),r.a.createElement(Z,{path:"/add-hotel",component:I,isAuthorized:this.state.isAuthorized})," ",r.a.createElement(Z,{path:"/my-hotels",component:G,isAuthorized:this.state.isAuthorized}),r.a.createElement(p.b,{path:"/favourite",component:W}),r.a.createElement(p.b,{path:"/",component:x}))))}}]),a}(r.a.Component),Q=a(18),Y=a(29),ee=a(19),te={text:null,hotels:[],favourites:[],userHotels:[]},ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SAVE_TEXT":return Object(ee.a)({},e,{text:t.payload});case"GET_HOTELS_SUCCESS":return Object(ee.a)({},e,{hotels:t.payload});case"ADD_TO_FAVOURITES":return Object(ee.a)({},e,{favourites:[].concat(Object(Y.a)(e.favourites),[t.payload])});case"REMOVE_FROM_FAVOURITES":return Object(ee.a)({},e,{favourites:Object(Y.a)(e.favourites.filter((function(e){return e.id!==t.payload})))});case"GET_USER_HOTELS_SUCCESS":return Object(ee.a)({},e,{userHotels:t.payload});default:return e}},ne=a(45),re=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Q.c,le=Object(Q.a)(ne.a),ce=Object(Q.d)(ae,re(le));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(h.a,{store:ce},r.a.createElement(K,null))),document.getElementById("root"))}},[[47,1,2]]]);
//# sourceMappingURL=main.77958a45.chunk.js.map